services:
  - type: web
    name: influai-rag
    env: python
    plan: free
    buildCommand: pip install -r requirements.txt
    # Added PYTHONPATH to ensure 'app' module is found
    startCommand: PYTHONPATH=$PYTHONPATH:/opt/render/project/src gunicorn run:app
    envVars:
      # Updated Python version to 3.13.0 to match the runtime environment
      - key: PYTHON_VERSION
        value: 3.13.0
      - key: CHROMA_DB_PATH
        value: /opt/render/project/src/chroma_db
      - key: FLASK_ENV
        value: production
    healthCheckPath: /health
    autoDeploy: true
